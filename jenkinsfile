
pipeline{
  agent any

  stages{
    stage('Initialization stage'){
      steps{
        echo 'Hello World'
        sh "ls -altr"
        sh "pwd"
        sh "gcloud config list"

        sh '''
         echo "ur inside sh section......"
         ls -altr
        chmod 777 installation.sh
        dos2unix installation.sh
        ls -altr
        git clone https://github.com/Evidentia1/ImageProcessing.git
        ls -altr
        gcloud compute instances delete sample-evidential-app --zone europe-west2
        ls -altr"
        
        gcloud compute instances create sample-evidential-app --zone=europe-west2 --machine-type= n1-standard-16 --image-projectdebian-cloud --image-family=debian-12 --boot-disk-size=150GB --service-account=961601925578-compute@developer.gserviceaccount.com --tag=http-server,https-server --scopes=https://www.googleapis.com/auth/drive,https://www.googleapis.com/auth/cloud-platform --metadata-from-file=startup-script=installation.sh
        ls -altr
        pwd  

        sh '''

      }
    }
  }

 post {
    always{
      cleanWs()
    }
 }
}
